if (self.CavalryLogger) { CavalryLogger.start_js(["ABOLoMU"]); }

__d("SearchResultPageLoggingViewportViewFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1744354");c=b("FalcoLoggerInternal").create("search_result_page_logging_viewport_view",a);e.exports=c}),null);
__d("MSearchVPVTracker",["FacebookAppIDs","Run","SearchResultPageLoggingViewportViewFalcoEvent","SubscriptionsHandler","VisibilityTracking"],(function(a,b,c,d,e,f){"use strict";f.track=a;var g=new Map(),h=new Map(),i=null,j=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.apply(this,arguments)||this}var d=a.prototype;d.handleEvent=function(a,c){var d;a=a.getAttribute("id");if(a==null)return;d=(d=g.get(a))==null?void 0:d.metaData;if(d==null)return;var e=d.unit_id_result_id,f=d.session_id,i=d.logging_unit_id,j=d.is_bootstrap_entity_module,k=h.get(a);d=Date.now();if(c.name==="hidden"&&k!=null){var l=d-k;b("SearchResultPageLoggingViewportViewFalcoEvent").logImmediately(function(){return{unit_id_result_id:e,common:{session_id:f,logging_unit_id:i,timestamp:Date.now().toString(),app_id:String(b("FacebookAppIDs").M_TOUCH_SITE)},vpv_duration:String(l),vpv_start_time:String(k),is_bootstrap_entity_module:j}});h["delete"](a)}else c.name==="visible"&&h.set(a,d)};return a}(b("VisibilityTracking"));function k(){i==null&&(i=new(b("SubscriptionsHandler"))());return i}function a(a){var c=a.key,d=a.metaData;a=a.cacheTrackedElements;a=a===void 0?!0:a;if(g.has(c))return;var e=new j({selector:"#"+c,handleAllHiddenEvents:!0,cacheTrackedElements:a,minOffsetVisibleFromBottom:1,minOffsetVisibleFromTop:1,minOffsetVisibleFromLeft:1,minOffsetVisibleFromRight:1});k().engage();k().addSubscriptions(b("Run").onLeave(function(){var a;(a=i)==null?void 0:a.release();e.onUnload();g["delete"](c);h["delete"](c)}));g.set(c,{tracker:e,metaData:d})}}),null);
__d("findTag",["$","fb-error-lite"],(function(a,b,c,d,e,f){var g=b("fb-error-lite").err,h=b("fb-error-lite").TAALOpcode;a=function(a,c){var d=b("$")(a);if(!c){if(d instanceof HTMLElement)return d;var e=g('Element with ID "%s" is not an HTMLElement',a);e.taalOpcodes=[h.PREVIOUS_FILE];throw e}e=d.tagName.toLowerCase();if(e!==c){a=g('Expected $("%s") to be of type "%s" but got "%s" instead.',a,c,e);a.taalOpcodes=a.taalOpcodes||[];a.taalOpcodes=[h.PREVIOUS_FILE];throw a}return d};c=a;e.exports=c}),null);
__d("JSResource",["JSResourceReference"],(function(a,b,c,d,e,f){e.exports=a;var g={};function h(a,b){g[a]=b}function i(a){return g[a]}function a(a){a=a;var c=i(a);if(c)return c;c=new(b("JSResourceReference"))(a);h(a,c);return c}a.Reference=b("JSResourceReference");a.loadAll=b("JSResourceReference").loadAll}),null);
__d("Queue",[],(function(a,b,c,d,e,f){var g={};a=function(){function a(a){this._timeout=null,this._interval=(a==null?void 0:a.interval)||0,this._processor=a==null?void 0:a.processor,this._queue=[],this._stopped=!0}var b=a.prototype;b._dispatch=function(a){var b=this;a===void 0;if(this._stopped||this._queue.length===0)return;a=this._processor;if(a==null){this._stopped=!0;throw new Error("No processor available")}var c=this._interval;if(c!=null)a.call(this,this._queue.shift()),this._timeout=setTimeout(function(){return b._dispatch()},c);else while(this._queue.length)a.call(this,this._queue.shift())};b.enqueue=function(a){this._processor&&!this._stopped?this._processor(a):this._queue.push(a);return this};b.start=function(a){a&&(this._processor=a);this._stopped=!1;this._dispatch();return this};b.isStarted=function(){return!this._stopped};b.dispatch=function(){this._dispatch(!0)};b.stop=function(a){this._stopped=!0;a&&this._timeout!=null&&clearTimeout(this._timeout);return this};b.merge=function(a,b){if(b){(b=this._queue).unshift.apply(b,a._queue)}else{(b=this._queue).push.apply(b,a._queue)}a._queue=[];this._dispatch();return this};b.getLength=function(){return this._queue.length};a.get=function(b,c){var d;b in g?d=g[b]:d=g[b]=new a(c);return d};a.exists=function(a){return a in g};a.remove=function(a){return delete g[a]};return a}();e.exports=a}),null);
__d("FalcoLoggerTransports",["AnalyticsCoreData","Banzai","JSResource","ODS","PersistedQueue","Queue","WebSession","promiseDone"],(function(a,b,c,d,e,f){"use strict";f.attach=a;var g=5*1024,h=60*1e3,i=1e3,j="falco:",k=new(b("Queue"))(),l=[],m=0,n,o=!1,p=!1,q=!1,r=!0;function s(a,b){var c=b.item.extra.length;m+c>g&&(clearTimeout(n),t());l.push([a,b]);m+=c}function t(){n=null;o=!1;var a=l;k.enqueue(function(b){return b.log(a.map(function(a){return a[1].item}),function(b){for(var c=0;c<a.length;c++){var d=a[c],e=d[0];d=d[1];e.markItem(d,b)}})});l=[];m=0}function u(a){return{events:a.map(function(a){return{name:a.name,extra:a.extra,rate:a.policy.r,time:a.time/1e3}})}}function v(a){return Object.freeze({deviceId:b("AnalyticsCoreData").device_id,sessionId:a,appId:b("AnalyticsCoreData").app_id,pushPhase:b("AnalyticsCoreData").push_phase})}function w(a,c){x("planes.banzai.write",a.length);for(var d=0;d<a.length;d++){var e,f=a[d];b("Banzai").post(j+f.name,(e={},e.e=f.extra,e.r=f.policy.r,e.d=b("AnalyticsCoreData").device_id,e.s=b("WebSession").getId(),e),c)}}function x(a,c){b("ODS").bumpEntityKey(1344,"falco.fabric.www."+b("AnalyticsCoreData").push_phase,a,c)}var y={log:function(a,c){w(a,b("Banzai").BASIC),c(!0)},logImmediately:function(a,c){w(a,b("Banzai").VITAL),c(!0)},logCritical:function(a,b){w(a,{signal:!0,retry:!0}),b(!0)}};function z(){if(p)return;b("JSResource").loadAll([b("JSResource")("TransportSelectingClientSingleton").__setRef("FalcoLoggerTransports"),b("JSResource")("RequestStreamCommonRequestStreamCommonTypes").__setRef("FalcoLoggerTransports")],function(a,c){var d=c.FlowStatus,e;c={onTermination:function(a){a.message==="Stream closed"?(k.stop(!0),p=!1):(r=!1,k.start(function(a){return a(y)}))},onFlowStatus:function(a){a===d.Started&&k.start(function(a){return a({log:function(c,a){x("planes.bladerunner.write",c.length);c=JSON.stringify(u(c));e&&(b("AnalyticsCoreData").enable_ack?b("promiseDone")(e.amendWithAck(c).then(function(b){return a(b)})["catch"](function(b){return a(!1)})):(e.amendWithoutAck(c),a(!0)))},logImmediately:function(b,a){this.log(b,a)},logCritical:function(b,a){this.log(b,a)}})})}};b("promiseDone")(a.requestStream({method:"Falco"},JSON.stringify(v(b("WebSession").getId())),c,{requestId:""}).then(function(a){e=a})["catch"](function(a){k.stop(!0),p=!1}))});p=!0}function A(a){return b("AnalyticsCoreData").enable_bladerunner&&r&&a.s===1}function a(){if(q)return;q=!0;b("PersistedQueue").setHandler("falco_queue_log",function(a){var b;while(b=a.dequeueItem())(function(b){A(b.item.policy)?(z(),n==null&&(n=setTimeout(t,h)),s(a,b)):y.log([b.item],function(c){return a.markItem(b,c)})})(b)});b("PersistedQueue").setHandler("falco_queue_immediately",function(a){var b;while(b=a.dequeueItem())(function(b){A(b.item.policy)?(z(),(n==null||!o)&&(clearTimeout(n),n=setTimeout(t,i),o=!0),s(a,b)):y.logImmediately([b.item],function(c){return a.markItem(b,c)})})(b)});b("PersistedQueue").setHandler("falco_queue_critical",function(a){var b;while(b=a.dequeueItem())(function(b){var c=b.item;A(c.policy)?(z(),k.enqueue(function(d){return d.logCritical([c],function(c){return a.markItem(b,c)})})):y.logCritical([c],function(c){return a.markItem(b,c)})})(b)})}}),null);